<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Productos</title>
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/formulario.css">
    <style>
        .producto {
            margin-bottom: 20px; /* Ajusta este valor según tus necesidades */
        }
    </style>
</head>

<body>
<div id="hero" class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
            </div>
        </div>
    </div>
</div>

<div id="productos-container" class="container">
    <div id="categoria-productos" class="mb-5">
        <h1 id="encabezado" class="encabezado">Productos</h1>
        <div class="container-btn">
            <button id="btn-agregar-producto" class="btn btn-primary mb-3">Agregar Producto</button>
        </div>
        <div id="productos" class="row"></div>
    </div>

    <div id="categoria-bebidas" class="mb-5">
        <h1 id="encabezado_01" class="encabezado">Bebidas</h1>
        <div class="container-btn">
            <button id="btn-agregar-bebida" class="btn btn-primary mb-3">Agregar Bebida</button>
        </div>
        <div id="bebidas" class="row"></div>
    </div>
</div>

<div id="agregar-producto" class="container d-none">
    <h1 id="encabezado_02" class="encabezado">Agregar Nuevo Producto</h1>
    <div class="limiter">
        <div class="container-login100">
            <div class="wrap-login100">
                <form id="form-agregar-producto">
                    <div class="form-group">
                        <label for="imagen-producto">Imagen:</label>
                        <input type="file" id="imagen-producto" name="imagen-producto" class="form-control" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label for="nombre-producto">Nombre:</label>
                        <input type="text" id="nombre-producto" name="nombre-producto" class="form-control" placeholder="Nombre del producto" required>
                    </div>
                    <div class="form-group">
                        <label for="descripcion-producto">Descripción:</label>
                        <input type="text" id="descripcion-producto" name="descripcion-producto" class="form-control" placeholder="Descripción del producto" required>
                    </div>
                    <div class="form-group">
                        <label for="precio-producto">Precio:</label>
                        <input type="number" id="precio-producto" name="precio-producto" class="form-control" placeholder="Precio del producto" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="descuento-producto">Descuento:</label>
                        <input type="number" id="descuento-producto" name="descuento-producto" class="form-control" placeholder="Descuento del producto" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="categoria-producto">Categoría:</label>
                        <select id="categoria-producto" name="categoria-producto" class="form-control" required>
                            <option value="productos">Productos</option>
                            <option value="bebidas">Bebidas</option>
                        </select>
                    </div>
                    <div class="container-btn">
                        <button class="btn btn-primary" type="submit">Agregar Producto</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const btnAgregarProducto = document.getElementById('btn-agregar-producto');
        const btnAgregarBebida = document.getElementById('btn-agregar-bebida');
        const formularioAgregarProducto = document.getElementById('agregar-producto');
        const formAgregarProducto = document.getElementById('form-agregar-producto');

        function cargarEventListeners() {
            if (btnAgregarProducto) {
                btnAgregarProducto.addEventListener('click', () => {
                    formularioAgregarProducto.classList.toggle('d-none');
                    document.getElementById('categoria-producto').value = 'productos';
                });
            }

            if (btnAgregarBebida) {
                btnAgregarBebida.addEventListener('click', () => {
                    formularioAgregarProducto.classList.toggle('d-none');
                    document.getElementById('categoria-producto').value = 'bebidas';
                });
            }

            if (formAgregarProducto) {
                formAgregarProducto.addEventListener('submit', function (event) {
                    event.preventDefault();

                    const imagen = document.getElementById('imagen-producto').files[0];
                    const nombre = document.getElementById('nombre-producto').value;
                    const descripcion = document.getElementById('descripcion-producto').value;
                    const precio = document.getElementById('precio-producto').value;
                    const descuento = document.getElementById('descuento-producto').value;
                    const categoria = document.getElementById('categoria-producto').value;

                    if (imagen) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            const imagenURL = e.target.result;

                            const nuevoProducto = document.createElement('div');
                            nuevoProducto.className = 'col-md-3 producto';
                            nuevoProducto.innerHTML = `
                                <div>
                                    <div class="four columns">
                                        <img src="${imagenURL}" class="imagen-curso u-full-width" alt="${nombre}">
                                        <div class="info-card">
                                            <h5 class="card-title">${nombre}</h5>
                                            <p class="card-text">${descripcion}</p>
                                            <p class="card-text text-muted">$${precio} <span class="u-pull-right">$${descuento}</span></p>
                                            <a href="#" class="u-full-width button-primary button input eliminar-producto" data-id="${Date.now()}">Eliminar Producto</a>
                                        </div>
                                    </div>
                                </div>
                            `;

                            if (categoria === 'productos') {
                                document.getElementById('productos').appendChild(nuevoProducto);
                            } else if (categoria === 'bebidas') {
                                document.getElementById('bebidas').appendChild(nuevoProducto);
                            }

                            formularioAgregarProducto.classList.add('d-none');
                            formAgregarProducto.reset();

                            cargarEventListenersEliminar(); // Cargar los event listeners de eliminar
                        };
                        reader.readAsDataURL(imagen);
                    }
                });
            }
        }

        function cargarEventListenersEliminar() {
            const botonesEliminar = document.querySelectorAll('.eliminar-producto');
            botonesEliminar.forEach(boton => {
                boton.addEventListener('click', (event) => {
                    event.preventDefault();
                    const producto = boton.closest('.producto');
                    if (producto) {
                        producto.remove();
                    }
                });
            });
        }

        cargarEventListeners();
    });
</script>
</body>
</html>
